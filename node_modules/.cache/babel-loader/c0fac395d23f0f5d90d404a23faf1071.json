{"ast":null,"code":"import _slicedToArray from \"/Users/jeffscottward/Documents/Development/jeffscottward/gampepadtest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jeffscottward/Documents/Development/jeffscottward/gampepadtest/src/components/GamepadController.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport useGamepads from \"../hooks/useGamepads\";\nimport GamepadSvg from \"./GamepadSvg\";\n\nvar calcDirectionDPAD = axe => {\n  switch (axe) {\n    case -1:\n      return 'UP';\n\n    case -0.7142857142857143:\n      return 'UPRIGHT';\n\n    case -0.4285714285714286:\n      return 'RIGHT';\n\n    case -0.1428571428571429:\n      return 'DOWNRIGHT';\n\n    case 0.1428571428571428:\n      return 'DOWN';\n\n    case 0.4285714285714286:\n      return 'DOWNLEFT';\n\n    case 0.7142857142857142:\n      return 'LEFT';\n\n    case 1:\n      return 'UPLEFT';\n\n    case 3.2857142857142856:\n      return 'NONE';\n\n    default:\n      return 'NONE';\n  }\n};\n\nvar calcButtons = buttons => {\n  var player1Buttons = players.player1.buttons.reduce((accumulator = [], currentValue = '', index) => {\n    if (currentValue.pressed === true) {\n      accumulator.push(index);\n    }\n\n    return accumulator;\n  });\n\n  switch (button) {\n    case -1:\n      return 'UP';\n\n    case -0.7142857142857143:\n      return 'UPRIGHT';\n\n    case -0.4285714285714286:\n      return 'RIGHT';\n\n    case -0.1428571428571429:\n      return 'DOWNRIGHT';\n\n    case 0.1428571428571428:\n      return 'DOWN';\n\n    case 0.4285714285714286:\n      return 'DOWNLEFT';\n\n    case 0.7142857142857142:\n      return 'LEFT';\n\n    case 1:\n      return 'UPLEFT';\n\n    case 3.2857142857142856:\n      return 'NONE';\n\n    default:\n      return 'NONE';\n  }\n};\n\nexport default function GamepadController() {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      gamepads = _useState2[0],\n      setGamepads = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      players = _useState4[0],\n      setPlayers = _useState4[1];\n\n  useGamepads(gamepads => {\n    setGamepads(gamepads);\n  });\n  useEffect(() => {\n    console.log(players);\n    console.log(gamepads);\n    setPlayers({\n      player1: gamepads[0],\n      player2: gamepads[1],\n      player3: gamepads[2],\n      player4: gamepads[3]\n    });\n  }, [gamepads[0] && gamepads[0].id, gamepads[1] && gamepads[1].id, gamepads[2] && gamepads[2].id, gamepads[3] && gamepads[3].id]);\n  useEffect(() => {\n    if (gamepads[0]) {\n      var player1DPAD = players.player1.axes[6]; // let player1Buttons = players.player1.buttons.reduce((accumulator = [], currentValue = '', index ) => {\n      //   if(currentValue.pressed === true) {\n      //     accumulator.push(index)\n      //   }\n      //   return accumulator\n      // })\n\n      console.log(calcDirectionDPAD(player1DPAD), calcButtons(players.player1.buttons));\n    }\n  }, [gamepads[0] && gamepads[0].buttons[0].pressed]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Gamepads\",\n    style: {\n      position: \"fixed\",\n      bottom: 0,\n      right: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, gamepads[0] && \"id: \".concat(gamepads[0].id, \" \"), \"buttons: \", gamepads[0] && /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[0].pressed ? 'Pressed 0' : 'CUP'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[1].pressed ? 'Pressed 1' : 'CRIGHT'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[2].pressed ? 'Pressed 2' : 'CDOWN'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[3].pressed ? 'Pressed 3' : 'CLEFT'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[4].pressed ? 'Pressed 4' : 'L'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[5].pressed ? 'Pressed 5' : 'R'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[6].pressed ? 'Pressed 6' : 'A'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[7].pressed ? 'Pressed 7' : 'Z'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[8].pressed ? 'Pressed 8' : 'B'), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, gamepads[0].buttons[9].pressed ? 'Pressed 9' : 'Start')));\n}","map":{"version":3,"sources":["/Users/jeffscottward/Documents/Development/jeffscottward/gampepadtest/src/components/GamepadController.jsx"],"names":["React","useEffect","useState","useGamepads","GamepadSvg","calcDirectionDPAD","axe","calcButtons","buttons","player1Buttons","players","player1","reduce","accumulator","currentValue","index","pressed","push","button","GamepadController","gamepads","setGamepads","setPlayers","console","log","player2","player3","player4","id","player1DPAD","axes","position","bottom","right"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport useGamepads from \"../hooks/useGamepads\";\r\nimport GamepadSvg from \"./GamepadSvg\";\r\n\r\nconst calcDirectionDPAD = (axe) => {\r\n  switch (axe) {\r\n    case -1:\r\n      return 'UP'\r\n    case -0.7142857142857143:\r\n      return 'UPRIGHT'\r\n    case -0.4285714285714286:\r\n      return 'RIGHT'\r\n    case -0.1428571428571429:\r\n      return 'DOWNRIGHT'\r\n    case 0.1428571428571428:\r\n      return 'DOWN'\r\n    case 0.4285714285714286:\r\n      return 'DOWNLEFT'\r\n    case 0.7142857142857142:\r\n      return 'LEFT'\r\n    case 1:\r\n      return 'UPLEFT'\r\n    case 3.2857142857142856:\r\n      return 'NONE'\r\n    default:\r\n      return 'NONE'\r\n  }\r\n};\r\n\r\nconst calcButtons = (buttons) => {\r\n  let player1Buttons = players.player1.buttons.reduce((accumulator = [], currentValue = '', index ) => {\r\n    if(currentValue.pressed === true) {\r\n      accumulator.push(index)\r\n    }\r\n    return accumulator\r\n  })\r\n  switch (button) {\r\n    case -1:\r\n      return 'UP'\r\n    case -0.7142857142857143:\r\n      return 'UPRIGHT'\r\n    case -0.4285714285714286:\r\n      return 'RIGHT'\r\n    case -0.1428571428571429:\r\n      return 'DOWNRIGHT'\r\n    case 0.1428571428571428:\r\n      return 'DOWN'\r\n    case 0.4285714285714286:\r\n      return 'DOWNLEFT'\r\n    case 0.7142857142857142:\r\n      return 'LEFT'\r\n    case 1:\r\n      return 'UPLEFT'\r\n    case 3.2857142857142856:\r\n      return 'NONE'\r\n    default:\r\n      return 'NONE'\r\n  }\r\n}\r\n\r\n\r\nexport default function GamepadController() {\r\n  const [gamepads, setGamepads] = useState({});\r\n  const [players, setPlayers] = useState(null);\r\n  useGamepads((gamepads) => {\r\n    setGamepads(gamepads)\r\n  });\r\n  \r\n  useEffect(() => {\r\n    console.log(players)\r\n    console.log(gamepads)\r\n    setPlayers({\r\n      player1: gamepads[0],\r\n      player2: gamepads[1],\r\n      player3: gamepads[2],\r\n      player4: gamepads[3],\r\n    })\r\n  }, [gamepads[0] && gamepads[0].id, \r\n      gamepads[1] && gamepads[1].id, \r\n      gamepads[2] && gamepads[2].id, \r\n      gamepads[3] && gamepads[3].id ])\r\n\r\n  \r\n  useEffect(() => {\r\n    if(gamepads[0]) {\r\n      let player1DPAD = players.player1.axes[6]\r\n      // let player1Buttons = players.player1.buttons.reduce((accumulator = [], currentValue = '', index ) => {\r\n      //   if(currentValue.pressed === true) {\r\n      //     accumulator.push(index)\r\n      //   }\r\n      //   return accumulator\r\n      // })\r\n\r\n      console.log(\r\n        calcDirectionDPAD(player1DPAD),\r\n        calcButtons(players.player1.buttons)\r\n      );\r\n    }  \r\n  }, [gamepads[0] && gamepads[0].buttons[0].pressed])\r\n\r\n  return (\r\n    <div\r\n      className=\"Gamepads\"\r\n      style={{ position: \"fixed\", bottom: 0, right: 0 }}\r\n    >\r\n      {gamepads[0] && (`id: ${gamepads[0].id} `)}\r\n      buttons: {gamepads[0] && (\r\n        <ul>\r\n          <li>{gamepads[0].buttons[0].pressed ? 'Pressed 0' : 'CUP'}</li>\r\n          <li>{gamepads[0].buttons[1].pressed ? 'Pressed 1' : 'CRIGHT'}</li>\r\n          <li>{gamepads[0].buttons[2].pressed ? 'Pressed 2' : 'CDOWN'}</li>\r\n          <li>{gamepads[0].buttons[3].pressed ? 'Pressed 3' : 'CLEFT'}</li>\r\n          <li>{gamepads[0].buttons[4].pressed ? 'Pressed 4' : 'L'}</li>\r\n          <li>{gamepads[0].buttons[5].pressed ? 'Pressed 5' : 'R'}</li>\r\n          <li>{gamepads[0].buttons[6].pressed ? 'Pressed 6' : 'A'}</li>\r\n          <li>{gamepads[0].buttons[7].pressed ? 'Pressed 7' : 'Z'}</li>\r\n          <li>{gamepads[0].buttons[8].pressed ? 'Pressed 8' : 'B'}</li>\r\n          <li>{gamepads[0].buttons[9].pressed ? 'Pressed 9' : 'Start'}</li>\r\n        </ul>\r\n      )}\r\n      \r\n      {/* {gamepadDisplay} */}\r\n      {/* {gamepads && gamepads[0] && (\r\n        <>\r\n          <GamepadSvg\r\n            directionUp={gamepads[0].buttons[12].pressed}\r\n            directionDown={gamepads[0].buttons[13].pressed}\r\n            directionLeft={gamepads[0].buttons[14].pressed}\r\n            directionRight={gamepads[0].buttons[15].pressed}\r\n            buttonDown={gamepads[0].buttons[0].pressed}\r\n            buttonRight={gamepads[0].buttons[1].pressed}\r\n            buttonLeft={gamepads[0].buttons[2].pressed}\r\n            buttonUp={gamepads[0].buttons[3].pressed}\r\n            select={gamepads[0].buttons[8].pressed}\r\n            start={gamepads[0].buttons[9].pressed}\r\n            analogLeft={\r\n              gamepads[0].axes[0] > 0.3 ||\r\n              gamepads[0].axes[0] < -0.3 ||\r\n              gamepads[0].axes[1] > 0.3 ||\r\n              gamepads[0].axes[1] < -0.3\r\n            }\r\n            analogRight={\r\n              gamepads[0].axes[2] > 0.3 ||\r\n              gamepads[0].axes[2] < -0.3 ||\r\n              gamepads[0].axes[3] > 0.3 ||\r\n              gamepads[0].axes[3] < -0.3\r\n            }\r\n            analogLeftDirection={[\r\n              calcDirectionHorizontal(gamepads[0].axes[0]),\r\n              calcDirectionVertical(gamepads[0].axes[1])\r\n            ]}\r\n            analogRightDirection={[\r\n              calcDirectionHorizontal(gamepads[0].axes[2]),\r\n              calcDirectionVertical(gamepads[0].axes[3])\r\n            ]}\r\n          />\r\n          <h3>Player 1</h3>\r\n        </>\r\n      )} */}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}